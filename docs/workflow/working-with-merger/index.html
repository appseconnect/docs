<h3 id="what-is-merge-node">What is Merge Node?</h3>

<p>This node is used to merge smaller data chunks into a single data packet. Like a <code class="highlighter-rouge">SPLITTER</code> node, it also has three components XPath, Entity Name and Batch size. For example, you have specified a batch size of 10 in a <code class="highlighter-rouge">MERGER</code> node then it will take 10 data packets where each packet contains a chunk of data and merge them into a single data packet.</p>

<p><strong>Entityname</strong> : Here specify the name which will act as a root element under which data will be merged.</p>

<p><strong>XPath</strong> : Here user need to specify a XPath based on which data will be fetched from each data file for merging.</p>

<h3 id="working-principle">Working Principle</h3>

<p><code class="highlighter-rouge">MERGER</code> node in APPSeCONNECT workflow used to take smaller data packets and merge them into single data packet.</p>

<p>For example I have 20 files or data chunks each of which contains a customer data with the below XML format . I want the address from each customer files and merge them into single file.So in the XPATH section I have provided 
following <code class="highlighter-rouge">XPATH</code> <code class="highlighter-rouge">//addresses</code> ,I have provided Batchsize as 2 abd Entity name I have provides <code class="highlighter-rouge">Envelops</code>.</p>

<p>Filter node defination  will be like this</p>

<p><img src="/staticfiles/workflow-management/media/Merger/Merger.PNG" alt="Merger" /></p>

<p>Single data file contains below XML data</p>

<pre><code class="language-XML">&lt;customers type="array"&gt;
  &lt;customer&gt;
    &lt;id type="integer"&gt;693970665552&lt;/id&gt;
    &lt;email&gt;tanya2@yopmail.com&lt;/email&gt;
    &lt;accepts-marketing type="boolean"&gt;false&lt;/accepts-marketing&gt;
    &lt;created-at type="dateTime"&gt;2018-09-28T12:15:51+05:30&lt;/created-at&gt;
    &lt;updated-at type="dateTime"&gt;2018-09-28T12:15:51+05:30&lt;/updated-at&gt;
    &lt;first-name nil="true"/&gt;
    &lt;last-name nil="true"/&gt;
    &lt;orders-count type="integer"&gt;0&lt;/orders-count&gt;
    &lt;state&gt;invited&lt;/state&gt;
    &lt;total-spent type="decimal"&gt;0.00&lt;/total-spent&gt;
    &lt;last-order-id type="integer" nil="true"/&gt;
    &lt;note nil="true"/&gt;
    &lt;verified-email type="boolean"&gt;true&lt;/verified-email&gt;
    &lt;multipass-identifier nil="true"/&gt;
    &lt;tax-exempt type="boolean"&gt;false&lt;/tax-exempt&gt;
    &lt;phone nil="true"/&gt;
    &lt;tags&gt;&lt;/tags&gt;
    &lt;last-order-name nil="true"/&gt;
    &lt;addresses type="array"&gt;
      &lt;address&gt;
        &lt;id type="integer"&gt;738646425680&lt;/id&gt;
        &lt;customer-id type="integer"&gt;693970665552&lt;/customer-id&gt;
        &lt;first-name&gt;Tanya&lt;/first-name&gt;
        &lt;last-name&gt;Raheja&lt;/last-name&gt;
        &lt;company nil="true"/&gt;
        &lt;address1 nil="true"/&gt;
        &lt;address2 nil="true"/&gt;
        &lt;city nil="true"/&gt;
        &lt;province nil="true"/&gt;
        &lt;country nil="true"/&gt;
        &lt;zip nil="true"/&gt;
        &lt;phone nil="true"/&gt;
        &lt;name&gt;Tanya Raheja&lt;/name&gt;
        &lt;province-code nil="true"/&gt;
        &lt;country-code nil="true"/&gt;
        &lt;country-name nil="true"/&gt;
        &lt;default type="boolean"&gt;true&lt;/default&gt;
      &lt;/address&gt;
    &lt;/addresses&gt;
  &lt;/customer&gt;
&lt;/customers&gt;
</code></pre>

<p>So after executing the Merger node 2 files will be generated with merged data and each file contains data in the below format.</p>

<pre><code class="language-XML">&lt;Envelops&gt;
    &lt;addresses type="array"&gt;
      &lt;address&gt;
        &lt;id type="integer"&gt;738646425680&lt;/id&gt;
        &lt;customer-id type="integer"&gt;693970665552&lt;/customer-id&gt;
        &lt;first-name&gt;Tanya&lt;/first-name&gt;
        &lt;last-name&gt;Raheja&lt;/last-name&gt;
        &lt;company nil="true"/&gt;
        &lt;address1 nil="true"/&gt;
        &lt;address2 nil="true"/&gt;
        &lt;city nil="true"/&gt;
        &lt;province nil="true"/&gt;
        &lt;country nil="true"/&gt;
        &lt;zip nil="true"/&gt;
        &lt;phone nil="true"/&gt;
        &lt;name&gt;Tanya Raheja&lt;/name&gt;
        &lt;province-code nil="true"/&gt;
        &lt;country-code nil="true"/&gt;
        &lt;country-name nil="true"/&gt;
        &lt;default type="boolean"&gt;true&lt;/default&gt;
      &lt;/address&gt;
    &lt;/addresses&gt;
  &lt;addresses type="array"&gt;
    &lt;address&gt;
      &lt;id type="integer"&gt;738646294608&lt;/id&gt;
      &lt;customer-id type="integer"&gt;693970534480&lt;/customer-id&gt;
      &lt;first-name&gt;Utpal&lt;/first-name&gt;
      &lt;last-name&gt;Maity&lt;/last-name&gt;
      &lt;company nil="true"/&gt;
      &lt;address1&gt;sadsaf&lt;/address1&gt;
      &lt;address2&gt;sfdsgf&lt;/address2&gt;
      &lt;city&gt;Kansas City&lt;/city&gt;
      &lt;province nil="true"/&gt;
      &lt;country nil="true"/&gt;
      &lt;zip&gt;112451&lt;/zip&gt;
      &lt;phone&gt;114156124223&lt;/phone&gt;
      &lt;name&gt;Utpal Actor&lt;/name&gt;
      &lt;province-code nil="true"/&gt;
      &lt;country-code nil="true"/&gt;
      &lt;country-name nil="true"/&gt;
      &lt;default type="boolean"&gt;true&lt;/default&gt;
    &lt;/address&gt;
  &lt;/addresses&gt;
  &lt;addresses type="array"&gt;
    &lt;address&gt;
      &lt;id type="integer"&gt;737588379728&lt;/id&gt;
      &lt;customer-id type="integer"&gt;692949483600&lt;/customer-id&gt;
      &lt;first-name&gt;Hiba&lt;/first-name&gt;
      &lt;last-name&gt;Ali&lt;/last-name&gt;
      &lt;company&gt;Honda F1&lt;/company&gt;
      &lt;address1&gt;Kolkata&lt;/address1&gt;
      &lt;address2&gt;&lt;/address2&gt;
      &lt;city&gt;Kolkata&lt;/city&gt;
      &lt;province&gt;West Bengal&lt;/province&gt;
      &lt;country&gt;India&lt;/country&gt;
      &lt;zip&gt;700000&lt;/zip&gt;
      &lt;phone&gt;09000000000&lt;/phone&gt;
      &lt;name&gt;DD chup&lt;/name&gt;
      &lt;province-code&gt;WB&lt;/province-code&gt;
      &lt;country-code&gt;IN&lt;/country-code&gt;
      &lt;country-name&gt;India&lt;/country-name&gt;
      &lt;default type="boolean"&gt;true&lt;/default&gt;
    &lt;/address&gt;
  &lt;/addresses&gt;
&lt;/Envelops&gt;

</code></pre>
