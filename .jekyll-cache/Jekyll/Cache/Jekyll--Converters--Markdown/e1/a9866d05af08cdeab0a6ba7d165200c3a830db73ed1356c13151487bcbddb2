I"KJ<h2 id="pre-requisites">Pre-requisites</h2>

<ul>
  <li>It is recommended that user should upgrade/install the latest Agent from cloud. Even though we are backward compatible, and older Agents can still communicate with server, we still ask users to upgrade to get full flavour of new features.</li>
  <li>You must have Environment Management privilege to perform actions on the Environment Settings panel. As an administrator of an organization, you can use the environment screens as you want, but if you are assigned as Standard user, you might only get read-only access to the screen.</li>
</ul>

<h2 id="accessing-the-environment-user-interface">Accessing the Environment User Interface</h2>

<ol>
  <li>Login to APPSeCONNECT portal with valid credentials &amp; navigate to the <code class="language-plaintext highlighter-rouge">Manage</code> section of your Project.</li>
  <li>Click on the Environments button from the Manage drop-down. <br />
<img src="/staticfiles/deployment/media/RevampedEnv/Enviornment1.png" alt="Enviornment1" /></li>
  <li>Environment section in your project will give you a detailed overview about the number of Agent (both OP &amp; Cloud) deployed in your network, whether they are 
connected or not.</li>
  <li>Agents that are deployed will have the indicators that displays whether the agent is active or inactive.
    <ul>
      <li>RED indicator - Agent is either detached or inactive.</li>
      <li>BLUE indicator - Agent is up and Running.</li>
    </ul>
  </li>
</ol>

<p>Given below are the available features of Environment.</p>

<h3 id="environment-listing">Environment Listing</h3>

<p>This section shows, the list of environments where the Agent deployments are done for the project/organization.
Listed below are the functionalities that are displayed in the Environment Listed Page.</p>

<p>a.	Environment Status: Agent indicators to visualize the status of the Agents (Active/Inactive).      <br />
b.	Grouping of environments:</p>
<ul>
  <li>User can create multiple environment group for an organisation by click on the <code class="language-plaintext highlighter-rouge">Add Group</code> button.</li>
  <li>User can drag and drop every agent with respect to the groups (For Ex: Production or for testing or Region Wise).</li>
  <li>User can also move the agents from one group to another.   <br />
<img src="/staticfiles/deployment/media/RevampedEnv/grouping-env.png" alt="grouping-env" /></li>
</ul>

<p><strong>Note:(a) Users will not be able to create a folder with same name.  <br />
        (b) Only the created folder can be deleted. The default <code class="language-plaintext highlighter-rouge">HOME</code> folder will not have the delete button.<br />
        (c) User will not be able to create and save any folder in listing page without naming the folder
        (d) User cannot create any blank folder and Save in the environment listing page. An error message
         will get displayed, if no name has been provided to the newly created folder</strong></p>

<h3 id="grouping-of-environments">Grouping of Environments</h3>

<p>APPSeCONNECT Users can add multiple groups to their environment module by clicking on the <code class="language-plaintext highlighter-rouge">ADD Group</code> button.</p>

<ol>
  <li>Click on the Add Group button, user gets the window for entering the Group Name.  <br />
<img src="/staticfiles/deployment/media/RevampedEnv/grouping-env1.png" alt="grouping-env1" /></li>
  <li>Enter the name to the Environment group.<br />
<img src="/staticfiles/deployment/media/RevampedEnv/grouping-env2.png" alt="grouping-env2" /></li>
  <li>Click OK button. Here you can now view the created group in the Environment list. <br />
<img src="/staticfiles/deployment/media/RevampedEnv/grouping-env3.png" alt="grouping-env3" /></li>
</ol>

<h3 id="adding-cloud-environment">Adding Cloud Environment</h3>

<p>If your organization is cloud-enabled, you will get the option to create cloud environment.
<img src="/staticfiles/deployment/media/RevampedEnv/Enviornment2.png" alt="Enviornment2" /></p>
<ol>
  <li>Click on the + button to add a new cloud environment. The new cloud env setup window appears. 
<img src="/staticfiles/deployment/media/RevampedEnv/Enviornmentnew1.png" alt="Enviornmentnew1" /></li>
  <li>Enter the cloud env details and click on the save button. 
<img src="/staticfiles/deployment/media/RevampedEnv/Enviornmentnew2.png" alt="Enviornmentnew2" /></li>
  <li>On saving, the user gets the confirmation message for the successful creation of Cloud Environment.
<img src="/staticfiles/deployment/media/RevampedEnv/Enviornmentnew3.png" alt="Enviornmentnew3" /></li>
</ol>

<p><strong>Note: (a) Only one cloud environment can be set as primary at a time.  <br />
        (b) By default the agents are positioned in the group named Home.  <br />
        (c) Each organisation can have only one cloud agent. User cannot create another cloud agent after creating one.</strong></p>

<p>Once the cloud environment is ready, you will get the active cloud agent in the listing and the 
add indicator (as shown in above figure) will become inactive.<br />
<img src="/staticfiles/deployment/media/RevampedEnv/Enviornment3.png" alt="Enviornment3" /></p>

<h3 id="environment-details---on-premise-agent">Environment Details - On-Premise Agent</h3>

<p>This section will provide the detailed overview and settings control (privilege based) 
for the environment(On-Premise Agent) that are running the current Agent.<br />
Users of new agent (On-Premise Agent) will get the following sub-tabs with respect to the selected environment.<br />
a. <strong>Properties</strong>: The panel appears, when the user selects an active OP Agent from the environment listing of the project.    <br />
<img src="/staticfiles/deployment/media/RevampedEnv/Enviornment4.png" alt="Enviornment4" />    <br />
This page will give live information about the current OP agent, including:</p>
<ul>
  <li>Architecture in use</li>
  <li>The latest agent deployment version for the selected environment</li>
  <li>Agent last restart time is default 03:49 for all organizations who are using OP Agent. Later you can view the dynamic time of agent restart if restarted manually.</li>
  <li>APPSeCONNECT directory free space available</li>
  <li>CPU and Memory Usage display the dynamic data depending on the consumption rate.</li>
  <li>Agent Installation directory path</li>
  <li>Date of Agent Installation</li>
  <li>Agent Logs - These are the dynamic process logs and the notifications, from where one can keep track of Scheduler details, rule that are 
scheduled and are under execution, service status etc.</li>
</ul>

<p><strong>Note: User can view the log files by double clicking on them.</strong></p>

<p>b. <strong>Process Flows</strong>
Click on the Process Flows tab in the Environment Details Page. You can view all the Process Flow those are deployed on that environment. The following are the details that will displayed for deployed Process Flows.</p>
<ul>
  <li>Name of the Process Flow</li>
  <li>Description of the Process Flow</li>
  <li>Version of the Process Flow</li>
  <li>The time of Deployment</li>
  <li>Actions<br />
<img src="../../../staticfiles/deployment/media/RevampedEnv/processflow_view.png" alt="Processflow View" /><br />
c. <strong>Plugins</strong> - This page will only display the plugin details from OP Agent. 
<img src="/staticfiles/deployment/media/RevampedEnv/Env_OP_Plugin_Image.png" alt="Env_OP_Plugin_Image" />   <br />
d. <strong>Settings</strong> - This page is only accessible to users who have the privilege to control the settings of OP.    <br />
<img src="/staticfiles/deployment/media/RevampedEnv/Enviornment5.png" alt="Enviornment5" /></li>
</ul>

<p><strong>Settings have three available sections for managing OP Agents:</strong></p>

<p>1) Retry Setting - One can schedule resync of failed integrations, where you can provide the start time, 
   no. of iterations and batch size for each resync. Default frequency is daily. To make the resync schedule active,
   you must activate Retry transaction.</p>

<p>2) Log Settings - You can control the way you want to view and store the log in OP Agent from portal now.</p>

<ul>
  <li>If Log in detail is set, then the log will be reflected in .txt files and stored in the same way. If Log in Database is set, then the log will be 
stored in sql lite database and will be reflected in the log bucket.</li>
  <li>Set Target for - It will allow you to define the type of log that you want to view, whether Error, Infor or Status.</li>
  <li>Severity Level - Each log has its own severity level. You can set the type - Critical, High, Medium, depending on the log, you want to view.</li>
</ul>

<p>3) Real Time Settings - Users can provide the Realtime details when working with APPSeCONNECT API Management. 
   Users need to provide the Hostname and the Port for the RealTime Execution.</p>

<p>4) Diagnostic Settings - You can turn the Diagnostic mode on, from portal itself. Once the its active, all the transaction and process 
   files will get available in Agent and service path as shown in the image.</p>

<p>Diagnostic Settings is provided with two output paths:</p>

<p>a)	Agent Output Path: This path provides the details of the transformed files when triggered manually.       <br />
b)	Service Output Path: Service path provides the details of the transformed files when triggered through Autosync.</p>

<p><img src="/staticfiles/deployment/media/RevampedEnv/Diagnostic_Settings_OP.png" alt="Diagnostic_Settings_OP" /></p>

<p>After saving the changes in settings, the updated information gets auto-reflected in OP Agent.</p>

<p><strong>Note: (a) Any changes done and saved in the environment settings page of the portal, will get updated in the 
            Settings section of the corresponding OP Agent and vice-versa.
        (b) The environment details page appears only when the autosync checkbox is enabled and activated in the settings of OP Agent as 
            keeping autosync activated keeps the Agent and the Portal connected.</strong></p>

<h3 id="environment-details---cloud-agent">Environment Details - Cloud Agent</h3>

<p>Cloud organizations can currently control the followings settings of their cloud agent from portal
<img src="/staticfiles/deployment/media/RevampedEnv/Enviornment7.png" alt="Enviornment7" /></p>

<p><strong>Retry Settings</strong>
Detailed field description:</p>
<ul>
  <li>Frequency: This is a static field and is for the schedule period for the Resync to happen. By default, its configured as Daily.</li>
  <li>Start Time: This is a customizable field for the user. It defines the start time of the Resync Process.</li>
  <li>Execute For: This a time span as for how long the Resync process will occur. The span is processed in hours and users can customize it as per their requirement. By default, <code class="language-plaintext highlighter-rouge">its configured as 0</code>.</li>
  <li>Batch Size: This field states, the no of data in a batch to be resynced. The <code class="language-plaintext highlighter-rouge">Default value is 10</code> but the users are open to customize as per their requirement.</li>
</ul>

<p><strong>Log Settings</strong>
Detailed field description:</p>
<ul>
  <li>Log in Detail: Detailed log would be fetched as per the sync is processed.</li>
  <li>Log in Database: The log fetched, would be stored in the database.</li>
  <li>Set target for: Users can filter the failed sync based on Error, Info and Status.</li>
  <li>Severity Level: Users can filter the error logs based on the severity level of the errors generated. 
The severity level is categorized into <code class="language-plaintext highlighter-rouge">Medium, High &amp; Critical</code>.</li>
</ul>

<p><strong>Process Flow Tab</strong></p>

<p>You can view all the Process Flow those are deployed on that environment. The following are the details that will displayed for deployed Process Flows.
a.	Name of the Process Flow 
b.	Description of the Process Flow 
c.	Version of the Process Flow
d.	The time of Deployment</p>

<h3 id="deleting-environment">Deleting Environment</h3>

<p>You can now directly delete environments that are no longer in use from the listing itself. As soon as you perform delete from portal, 
the OP Agent instance (active/inactive) gets auto-removed from the local environment and all the associated licenses will get removed. <br />
All the services and sync operations will get stopped. If any new user or different project user logs in further to the same environment, 
a new license will be generated against it.</p>

<p>Steps:</p>

<p>1) Login to Portal.<br />
2) Go to your Project<br />
3) Go to Manage &gt; Environments<br />
4) Select the environment which you want to delete from listing<br />
5)Click on Delete. <br />
<img src="/staticfiles/deployment/media/RevampedEnv/Enviornment_Delete.png" alt="Enviornment_Delete" />   <br />
 Once deleted, user get a successful message for the deletion of the environment. The environment gets removed from the environment list after the deletion process.</p>

<p><img src="/staticfiles/deployment/media/RevampedEnv/Enviornment9.png" alt="Enviornment9" /></p>

<p><strong>Note: If a user has relogged in to a deleted Agent from the portal, 
the deleted agent now will be visible in attached mode in the portal.</strong></p>

<h3 id="detaching-and-attaching-environment">Detaching and Attaching Environment</h3>

<p>Environment detachment is a functionality that blocks the Agent from use in that specific environment. 
Therefore, when detaching the selected environment from Portal, it remains in the list but will be displayed 
as Agent is Detached when clicked on it.</p>

<p>Post detachment, if the user tries to re-login to the agent, it will display the message, Agent is Blocked.<br />
<strong>Note: (a) On detaching the Agent from portal, the On-Premise Agent automatically gets shut down.
        (b) Detached Agents, needs to be reattached from the portal for further logging in to it.
        (c) Users can anytime delete and detach/attach an inactive agent in the portal.</strong><br />
<img src="/staticfiles/deployment/media/RevampedEnv/agent-disconnected.png" alt="agent-disconnected" /></p>

<p>For unblocking the agent,  user/implementer needs to attach the agent by clicking on the Attach button.</p>

<p>Also, if the environment being attached, but the Auto-Sync is Off, then the user would view the Agent 
is Disconnected page. User needs to enable the auto sync checkbox in the On-Premise agent for viewing 
the Environment details. 
<img src="/staticfiles/deployment/media/RevampedEnv/agent-disconnected1.png" alt="agent-disconnected1" /></p>

<h2 id="environment-view-for-old-agents">Environment View for Old Agents</h2>

<p>APPSeCONNECT License management &amp; environment management is equipped with the full supportability of old agents. However, old agent users are 
restricted from viewing the environment details which is available on for latest agents. Users need to update the old agent for viewing the 
details of the environment.</p>

<p>Old agent will support the complete functionality of the integration process. Old Agent user shall view the environment as given below:
<img src="/staticfiles/deployment/media/RevampedEnv/old-environment1.png" alt="old-environment1" /></p>

<p>The UI will have three buttons:</p>
<ul>
  <li>Deploy Configuration: Any changes or modifications made in the portal will be deployed to the OP agent for the sync process when deployed the configurations from the portal.</li>
  <li>Agent Settings: This page has three tabs that configures the setting for the environment.<br />
(a)Log Settings: Log settings captures the details of the Sync process.  <br />
(b)Real Time Settings: Real Time settings is required when working with Real Time touchpoints using <a href="/api-management/steps-to-create-webhook-endpoint/">Webhooks</a> of the API Management.<br />
(c)Resync Settings: Users can enable/disable the Autosync feature of the OP agent in the Resync Settings tab.</li>
</ul>

<p><strong>Note: Old Agent in Detached mode, will not be able to deploy any configuration to the corresponding agent.</strong></p>

<h3 id="working-with-the-agent-settings-panel-in-old-agent">Working with the Agent Settings Panel in Old Agent</h3>

<p>Environments needs to be configured for the generation of the sync logs, autosync activation and Realtime settings configuration. Users need to 
configure the panel accordingly for detailed output and process.</p>

<p><img src="/staticfiles/deployment/media/RevampedEnv/old-environment2.png" alt="old-environment2" /></p>

<p><strong>Note: (a) Agent status for old agents will be displayed in RED but will have the complete functionality of an Active Agent.<br />
        (b) Users can detach/attach the agents for detaching/attaching the agent</strong>.</p>

<p class="notice--info"><strong>ProTip:</strong> (1) Agent needs to be dissociated first from the portal, before reassigning the same license key. <br />
            (2) APPSeCONNECT <a href="/license%20management/license-management/">License Management</a> is compatible even with older versions of the agent.</p>

<p><strong>Log Settings:</strong> Log settings captures the severity details of the logs that are generated. User can filter accordingly as per severity basis of the logs. 
The page captures the following operations:</p>
<ul>
  <li>Log in Detail: Detailed log would be fetched as per the sync is processed.</li>
  <li>Log in Database: The log fetched, would be stored in the database.</li>
  <li>Set target for: Users can filter the failed sync based on Error, Info and Status.</li>
  <li>Severity Level: Users can filter the error logs based on the severity level of the errors generated. The severity level is categorized into Medium, High, Critical.</li>
</ul>

<p><strong>Note: It is recommended that users select all the three option for detailed information for the SET TARGET FOR and SEVERITY LEVEL option</strong>.</p>

<p><img src="/staticfiles/deployment/media/RevampedEnv/old-environment3.png" alt="old-environment3" /></p>

<p><strong>Real Time settings</strong> - Realtime settings is required when working with the Realtime Touchpoint in API Management. Configurations should be made only when working with the Webhook API(s) and the Real Time Touchpoints in 
<a href="/api-management/overview/">APPSeCONNECT API Management</a>.
Real Time settings has two field for the configurations:</p>
<ul>
  <li>Real Time Host Name: Users needs to enter the <a href="/api-management/Steps-to-register-url/">Register URL</a> of the Real Time Touchpoints.</li>
  <li>Port: This is the Port number of the hosted URL.
<img src="/staticfiles/deployment/media/RevampedEnv/old-environment4.png" alt="old-environment4" /></li>
</ul>

<p><strong>Resync Settings:</strong> This section of the page has a checkbox for the user to Enable/Disable the autosync of resync.</p>

:ET